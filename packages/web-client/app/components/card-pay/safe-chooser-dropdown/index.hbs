<PowerSelect
  class="safe-chooser-dropdown"
  @options={{@safes}}
  @selected={{or @selectedSafe @safes.firstObject}}
  @onChange={{@onChooseSafe}}
  @renderInPlace={{true}}
  @eventType="click" {{!-- to prevent auto-selection of first item, as discussed at https://github.com/cardstack/cardstack/pull/2051 --}}
  @verticalPosition="below"
  data-test-safe-chooser-dropdown
  ...attributes
as |safe|>
  {{#if (eq safe.type "merchant")}}
    <CardPay::SafeChooserDropdown::MerchantOption @safe={{safe}} />
  {{else}}
    <CardPay::AccountDisplay
      @size={{if @isComplete "small"}}
      @icon={{safe.type}}
      @name={{uppercase safe.type}}
      @address={{safe.address}}
    />
  {{/if}}
</PowerSelect>