{{#unless this.isInitializing}}
  <WorkflowThread class="deposit-workflow" @workflow={{this.workflow}} @onClose={{@onClose}}>
    <:before-content>
      <Boxel::ExpandableBanner
        @icon="info"
        @summary="Deposit Funds"
        open
      >
        <div class="deposit-workflow__banner">
          <p>
            As a Supplier, you deposit funds from your {{network-display-info "layer1" "fullName"}} wallet into the
            CARD Protocol’s reserve pool and receive the corresponding amount of CPXD
            tokens in your {{network-display-info "layer2" "fullName"}} wallet.
          </p>
          <p>
            We currently support two types of asset you can deposit into the reserve pool:
            <ul>
              <li>Dai stablecoins (DAI)</li>
              <li>Cardstack ERC-20 tokens (CARD)</li>
            </ul>
          </p>
          <p>
            The CARD Protocol’s reserve pool facilitates payments between customers
            and businesses on the Cardstack network.
          </p>
          {{!-- TODO: reward program --}}
          {{!-- <p>
            <small>
              <strong>Fees:</strong> Suppliers earn transaction fees of 0.5% for all transactions across
              the CARD Protocol. Those fees will be distributed to Suppliers based on
              their proportional share of supplied tokens in the reserve pool, averaged
              over the 30-day period in which the transactions occurred. <a href="#">More details here.</a>
            </small>
          </p> --}}
        </div>
      </Boxel::ExpandableBanner>
    </:before-content>
  </WorkflowThread>
{{/unless}}
<Listener
  @emitter={{this.layer1Network}}
  @event="disconnect"
  @action={{this.onDisconnect}}
/>
<Listener
  @emitter={{this.layer2Network}}
  @event="disconnect"
  @action={{this.onDisconnect}}
/>
<Listener
  @emitter={{this.layer1Network}}
  @event="account-changed"
  @action={{this.onAccountChanged}}
/>
<Listener
  @emitter={{this.layer2Network}}
  @event="account-changed"
  @action={{this.onAccountChanged}}
/>
