{{#if (is-postable-on-new-day @postable)}}
  <Boxel::DateDivider
    @date={{@postable.timestamp}}
    data-test-date-divider
  />
{{/if}}

{{#if @postable.message}}
  <Boxel::ThreadMessage
    @datetime={{@postable.timestamp}}
    @imgURL={{@postable.author.imgURL}}
    @hideMeta={{postable-meta-identical @postable (object-at @postables (dec @index))}}
    data-test-postable={{@index}}
    ...attributes
  >
    <div class="workflow-thread__markdown">
      {{format-workflow-message @postable.message}}
    </div>
  </Boxel::ThreadMessage>
{{else}}
  <Boxel::ThreadMessage
    @datetime={{@postable.timestamp}}
    @imgURL={{@postable.author.imgURL}}
    @hideMeta={{postable-meta-identical @postable (object-at @postables (dec @index))}}
    data-test-postable={{@index}}
    ...attributes
  >
    {{component
      @postable.componentName
      workflowSession=@postable.session
      onComplete=(optional @postable.onComplete)
      onIncomplete=(optional @postable.onIncomplete)
    }}
  </Boxel::ThreadMessage>
{{/if}}
