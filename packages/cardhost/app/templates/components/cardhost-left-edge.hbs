<CardstackSession as |session|>
  <aside
    id="cardhost-left-edge"
    class="cardhost-left-edge"
    data-test-cardhost-left-edge
  >
    <nav
      class="cardhost-left-edge--nav {{@mode}} {{if this.isExpanded "expanded"}}"
    >
      <ul>
        <li class="login-grid">
          <button
            class="cardhost-left-edge--nav-button cardstack-logo-button"
            aria-label="expandable menu with login controls"
            aria-expanded={{this.isExpanded}}
            {{on "click" this.toggleMenuExpand}}
            data-test-toggle-left-edge
          >
            {{svg-jar "cardstack-logo" width="21px" height="23px"}}
          </button>
          {{#if this.isExpanded}}
            <div
              class="login-grid-right-column"
              {{did-insert this.registerCloseListener}}
              {{will-destroy this.destroyCloseListener}}
            >
              {{#if session.isAuthenticated }}
                <Cta
                  {{on "click" (fn this.logout session.logout)}}
                  @variant="primary secondary"
                  class="cardhost-left-edge-login-buttons"
                  data-test-logout-button
                >
                  Log out
                </Cta>
              {{else}}
                <MockLogin as |login|>
                  <Cta
                    {{on "click" (fn login "user1")}}
                    @variant="primary"
                    class="cardhost-left-edge-login-buttons"
                    data-test-login-button
                  >
                    Log in
                  </Cta>
                </MockLogin>
              {{/if}}
            </div>
          {{/if}}
        </li>
        <li>
          <button
            disabled={{true}}
            class="cardhost-left-edge--nav-button"
            aria-label="catalog"
            data-test-catalog-button
          >
            {{svg-jar "card-catalog" width="20px" height="20px"}}
          </button>
        </li>
        <li>
          {{#if @displayLibrary}}
            <button
              {{on "click" this.showLibrary}}
              disabled={{not session.isAuthenticated}}
              class="cardhost-left-edge--nav-button"
              aria-label="library"
              data-test-library-button
            >
              {{svg-jar "library" width="21px" height="21px"}}
            </button>
          {{else}}
            <LinkTo
              @route="index"
              data-test-library-link
              class="cardhost-left-edge--nav-button library-button"
              title="Homepage"
            >
              {{svg-jar "library" width="21px" height="21px"}}
            </LinkTo>
          {{/if}}
        </li>
      </ul>
    </nav>

    {{yield}}
  </aside>
</CardstackSession>

{{#if this.isLibraryOpen}}
  <button {{on "click" this.hideLibrary}} class="hide-library--button">
    <span class="hide-library--button-icon">{{svg-jar "library" width="21px" height="21px"}}</span>
    <span class="hide-library--button-text">Hide Library</span>
  </button>
  {{in-bottom-toolbar show=(component "library" model=@model)}}
{{/if}}