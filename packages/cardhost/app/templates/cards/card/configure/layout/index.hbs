<div class="card-renderer--inner-container" data-test-card-view={{this.model.card.canonicalURL}}>
  <CardViewer @card={{this.model.card}} @mode="layout" as |card args|>
    {{#if this.cardstackSession.isAuthenticated}}
      <RightEdge
        @card={{card}}
        @parentCard={{get args "parentCard"}}
        @grandParentCard={{get args "grandParentCard"}}
        @cardSelected={{true}} {{!-- Change this when we want to display different right-edge options --}}
      >
        <div class="right-edge--section" data-test-appearance-section
          data-test-card-patched={{stringify this.handleThemeChange.isIdle}}
        >
          <div class="right-edge--section-header " data-test-section-header>
            Appearance
          </div>
          <div class="right-edge--items-container">
            <div class="right-edge--item" data-test-style-dropdown>
              <Form::BoxelDropdown
                @theme="cs-dark"
                @label="Choose a theme:"
                @options={{this.themerOptions}}
                @selected={{this.selectedTheme}}
                @onChange={{perform this.handleThemeChange}}
                @searchField="name"
              />
            </div>
            <div class="right-edge--item">
              <BoxelButton
                {{on "click" this.createTheme}}
                @variant="secondary responsive"
                @theme="cs-dark"
                data-test-card-custom-style-button
              >
                {{#if this.isDefault}}
                  New Custom Theme
                {{else}}
                  Edit Custom Theme
                {{/if}}
              </BoxelButton>
            </div>
          </div>
        </div>
      </RightEdge>
    {{/if}}
  </CardViewer>
</div>