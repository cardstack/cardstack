<div class="
  cardhost-cards
  {{if this.draggable.isDragging "dragging"}}
  {{this.routeInfo.mode}}
  {{if (or (eq this.routeInfo.mode "add") (eq this.routeInfo.mode "adopt")) "schema"}}
  {{if (or (eq this.routeInfo.mode "layout") (eq this.routeInfo.mode "fields")) "edit"}}
  {{if this.cardstackSession.isAuthenticated "logged-in" "logged-out"}}
  {{this.themerClasses}}"
  data-test-cardhost-cards
>
  <CardhostTopEdge @mode={{this.routeInfo.mode}}>
    {{#if (or (eq this.routeInfo.mode "layout") (eq this.routeInfo.mode "fields"))}}
      {{#let this.target.currentRoute.parent.attributes as |card|}}
        {{!-- TODO: Make this navigate to Preview route --}}
        <LinkTo
          @route="cards.card.view"
          @model={{card}}
          @class="preview-link cs-component-cta primary secondary cs-dark"
          data-test-preview-link-btn
        >
          Preview
        </LinkTo>
        <div class="view-selector">
          <LinkTo
            @route="cards.card.edit.layout"
            @class="view-selector--mode-link"
            @model={{card}}
            data-test-view-selector="layout"
          >
            {{svg-jar "layout" width="18px" height="17px"}}
            Layout
          </LinkTo>
          <LinkTo
            @route="cards.card.edit.fields"
            @class="view-selector--mode-link"
            @model={{card}}
            data-test-view-selector="fields"
          >
            {{svg-jar "form" width="19px" height="15px"}}
            Field
          </LinkTo>
        </div>
        <div class="mode-indicator">
        <span class="mode-indicator--label">
          {{svg-jar "edit" width="13px" height="13px"}}
          Edit Mode
        </span>
        <LinkTo
          title="Close edit mode"
          @route="cards.card.view"
          @class="mode-indicator--link"
          @model={{card}}
          data-test-top-edge-link="view"
        >
          <span>View</span>
        </LinkTo>
      </div>
      <SaveButton @card={{card}} />
      {{!-- TODO: Make this open the Actions menu --}}
      <Cta @variant="primary" class="edge-actions-button" data-test-edge-actions-btn>
        {{svg-jar "actions" width="16px" height="16px"}}
      </Cta>
      {{/let}}
    {{/if}}
  </CardhostTopEdge>
  {{outlet}}
</div>
