{{#if this.modal.isShowing}}
  <div class={{cn "modal" this.modal.state.format}} style="border:5px red dashed; margin: 5vw;padding:1vw" data-test-modal>
    <div>
      <button data-test-modal-close {{on 'click' this.close}}>Close Modal</button>
    </div>

    {{#if this.modal.isLoading}}
      <h1>LOADING!!!</h1>
    {{else}}
      {{#if (eq this.modal.state.format 'edit')}}
        <CardContainer
          @selected={{true}}
        >
          <:default>
            <this.modal.cardComponent />
          </:default>

          <:action-chin>
            <Boxel::Button @kind="primary" data-test-modal-save {{on 'click' this.modal.save}}>Save</Boxel::Button>
            <Boxel::Button @kind="secondary" data-test-modal-cancel {{on 'click' this.modal.close}}>Cancel</Boxel::Button>
          </:action-chin>
        </CardContainer>
      {{else}}
        <CardContainer
          @card={{this.modal.card}}
          @editable={{true}}
        >
          <this.modal.cardComponent />
        </CardContainer>
      {{/if}}
    {{/if}}
  </div>
{{/if}}

<div
  class="CardModal-urlWatcher"
  {{did-insert this.updateModal @url @format}}
  {{did-update this.updateModal @url @format}}
></div>

