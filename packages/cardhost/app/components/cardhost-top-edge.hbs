<div class="cardhost-top-edge {{@mode}}" data-test-cardhost-top-edge>
  {{#if (not-eq @mode "themer")}}
    <div class="cardhost-top-edge__controls cardhost-top-edge__controls--left">
      {{#if (or (eq @mode "fields") (eq @mode "layout"))}}
        <PreviewLinkButton
          @route="cards.card.configure.preview"
          @model={{@card.canonicalURL}}
          @class="cardhost-top-edge--preview-button {{if (eq @mode "fields") "hidden"}}"
          data-test-top-edge-preview-link />
      {{/if}}
    </div>

    <div class="cardhost-top-edge__controls cardhost-top-edge__controls--center">
      {{#if (or (eq @mode "fields") (eq @mode "layout"))}}
        <div class="view-selector" data-test-view-selector>
          <LinkTo
            @route="cards.card.configure.layout"
            @class="view-selector--mode-link {{if (eq @mode "layout") "active"}}"
            @model={{@card.canonicalURL}}
            data-test-view-selector="layout"
          >
            {{svg-jar "layout" width="18px" height="17px"}}
            Layout
          </LinkTo>
          <LinkTo
            @route="cards.card.configure.fields"
            @class="view-selector--mode-link {{if (eq @mode "fields") "active"}}"
            @model={{@card.canonicalURL}}
            data-test-view-selector="fields"
          >
            {{svg-jar "form" width="19px" height="15px"}}
            Field
          </LinkTo>
        </div>
      {{/if}}

      <CardSizeToggle class="cardhost-top-edge--size-buttons {{if (eq @mode "fields") "hidden"}}" data-test-top-edge-size-buttons />
    </div>

    <div class="cardhost-top-edge__controls cardhost-top-edge__controls--right">
      {{#if (or (eq @mode "fields") (eq @mode "layout"))}}
        <ModeIndicator
          @model={{@card.canonicalURL}}
          @route="cards.card.view"
          @mode="configure" />
      {{else}}
        <ModeIndicator
          @model={{@card.canonicalURL}}
          @route={{if @previousRoute @previousRoute.name "cards.card.configure.layout"}}
          @mode={{@mode}} />
      {{/if}}

      <EdgeActionsButton />
    </div>
  {{/if}}
</div>