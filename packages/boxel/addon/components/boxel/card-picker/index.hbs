<div ...attributes>
  {{#let (component (or @cardComponent "boxel/card-picker/card-option")) as |CardComponent|}}
    <PowerSelect
      class={{cn "card-picker-dropdown" card-picker-dropdown--selected=@selectedCard}}
      @options={{@cards}}
      @selected={{@selectedCard}}
      @selectedItemComponent="boxel/card-picker/selected-item"
      @placeholder="Select card"
      @onChange={{@chooseCard}}
      @renderInPlace={{true}}
      @eventType="click"
      @verticalPosition="below"
      data-test-card-picker-dropdown
    as |card|>
      <div
        class={{cn
          "card-picker-dropdown__option"
          card-picker-dropdown__option--selected=(eq card.title @selectedCard.title)
          card-picker-dropdown__option--disabled=(eq card.disabled true)
        }}
        data-test-card-picker-option={{card.title}}
      >
        <CardComponent @card={{card}} />
      </div>
    </PowerSelect>
    {{#if @selectedCard}}
      <CardComponent @card={{@selectedCard}} />
    {{/if}}
  {{/let}}
</div>