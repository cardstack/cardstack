{{#if @isOpen}}
  {{set-body-class "has-modal"}}
  {{on-key "Escape" @onClose event="keydown"}}
  <div
    style={{css-var
      boxel-modal-z-index=(if (eq @layer "urgent" ) "var(--boxel-layer-modal-urgent)" "var(--boxel-layer-modal-default)")
    }}
  >
    <button
      type="button"
      {{on "click" @onClose}}
      class="boxel-modal-overlay"
      tabindex="-1"
      data-test-modal-close-via-overlay
    >
      <span class="boxel-sr-only">Close modal</span>
    </button>

    <dialog
      class={{cn
        "boxel-modal"
        boxel-modal--small=(eq @size "small")
        boxel-modal--medium=(eq @size "medium")
        boxel-modal--large=(eq @size "large")
      }}
      open={{@isOpen}}
      aria-modal="true"
      ...attributes
    >
      <div class="boxel-modal__inner">
        {{yield}}
      </div>
    </dialog>
  </div>
{{/if}}