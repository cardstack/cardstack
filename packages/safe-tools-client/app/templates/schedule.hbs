<section class='safe-tools__dashboard-schedule'>
  <Boxel::ControlPanel as |cp|>
    <cp.Item @title='Wallet' @icon='wallet' @isActive={{not this.wallet.isConnected}}>
      {{#if this.wallet.isConnected}}
        <div
          class='safe-tools__dashboard-schedule-control-panel-address'
          data-test-wallet-address
        >
          {{truncate-middle this.wallet.address}}
        </div>
        <div
          class='safe-tools__dashboard-schedule-control-panel-connected-status'
        >
          {{svg-jar
            'icon-circle'
            width='6px'
            class='safe-tools__dashboard-schedule-control-panel-connected-status-icon'
          }} Connected
        </div>
      {{/if}}

      <ConnectButton
        class='safe-tools__dashboard-schedule-control-panel-connect-button'
        @onConnect={{set this.application 'isShowingConnectModal' true}}
      />
    </cp.Item>
    <cp.Item @title='Network' @icon='network'>
        <Boxel::Select
        class='safe-tools__dashboard-dropdown'
            @selected={{this.network}}
            @onChange={{this.network.onSelect}}
            @options={{this.network.supportedList}}
            as |network itemCssClass|
          >
          <div class={{itemCssClass}} data-test-selected-network>{{network.name}}</div>
        </Boxel::Select>
    </cp.Item>
    <cp.Item @title='Safe' @icon='safe'>
      {{#if this.wallet.isConnected}}
        <SafeInfo
          @safes={{this.safes.safes}}
          @currentSafe={{this.safes.currentSafe}}
          @onSelectSafe={{this.safes.onSelectSafe}}
          @tokenBalances={{this.safes.tokenBalances}}
          @onDepositClick={{set this 'isDepositModalOpen' true}}
          @safesLoadingError={{this.safes.safesResource.error}}
        />
      {{/if}}
    </cp.Item>
  </Boxel::ControlPanel>
  <section class='safe-tools__dashboard-schedule-content'>
    <ScheduleCollapsePanel @open={{not this.wallet.isConnected}} />
    <div class='temporary-form-container'>
      <SchedulePaymentFormActionCard />
    </div>
  </section>
</section>

<DepositModal
  @isOpen={{this.isDepositModalOpen}}
  @onClose={{set this 'isDepositModalOpen' false}}
  @safeAddress={{this.safes.currentSafe.address}}
  @networkName={{this.network.name}}
  @tokensToCover={{this.scheduledPaymentsTokensToCover}}
/>
