# cardpay-cli <!-- omit in toc -->
=============

CLI tool for basic actions in Cardpay

# Install
To install the Cardpay CLI run the following command:

```sh
curl -o- -L https://install.cardstack.com/install-cardpay.sh | bash
```
This will install the Cardpay CLI to your ~/.cardpay folder, as well as add the `cardpay` bin to your $PATH env var. Note that node ver 14+ is required to be installed on your system in order for the Cardpay CLI to run.

# Running
To run the Cardpay CLI type:
```sh
cardpay <command> <arguments> [options]
```

The commands are listed below (which you can view using --help option). Each command has arguments specific to it. The options indicate how you wish to connect to your wallet. You can either provide your mnemonic seed (as either an environment variable `MNEMONIC_PHRASE` or using the `--mnemonic` param. Or you can specify `--walletConnect` to use the cardpay wallet app. A QR code will be displayed that you can scan in your cardwallet app, which will connect the CLI to your cardwallet.

## Running within the development environment
If you wish to run the CLI within the development environment, then you can use the `yarn cardpay` yarn script.

First, ensure that the monorepo and cardpay-sdk package are setup correctly:
```sh
cd cardstack
yarn
cd packages/cardpay-sdk
yarn prepack
cd ../cardpay-cli
```

Then, simply run the command in the `packages/cardpay-cli` workspace and prefix the command with `yarn`. e.g.

```sh
yarn cardpay safe list --walletConnect
```

# Commands

<!-- BEGIN CLI DOCS GENERATED BY yarn command-docs -->Quick links:

 - [`cardpay assets token-balance [tokenAddress]`](#cardpay-assets-token-balance-tokenaddress)
 - [`cardpay bridge await-to-l1 <fromBlock> <txnHash>`](#cardpay-bridge-await-to-l1-fromblock-txnhash)
 - [`cardpay bridge await-to-l2 <fromBlock> [recipient]`](#cardpay-bridge-await-to-l2-fromblock-recipient)
 - [`cardpay bridge claim-on-l1 <messageId> <encodedData> <signatures..>`](#cardpay-bridge-claim-on-l1-messageid-encodeddata-signatures..)
 - [`cardpay bridge to-l1 <safeAddress> <amount> <tokenAddress> <receiver>`](#cardpay-bridge-to-l1-safeaddress-amount-tokenaddress-receiver)
 - [`cardpay bridge to-l2 <amount> <tokenAddress> [receiver]`](#cardpay-bridge-to-l2-amount-tokenaddress-receiver)
 - [`cardpay bridge withdrawal-limits <token>`](#cardpay-bridge-withdrawal-limits-token)
 - [`cardpay did resolve <did>`](#cardpay-did-resolve-did)
 - [`cardpay did resolve-aka <did>`](#cardpay-did-resolve-aka-did)
 - [`cardpay hub auth <hubRootUrl>`](#cardpay-hub-auth-hubrooturl)
 - [`cardpay merchant claim-revenue <merchantSafe> <tokenAddress> <amount>`](#cardpay-merchant-claim-revenue-merchantsafe-tokenaddress-amount)
 - [`cardpay merchant claim-revenue-gas-estimate <merchantSafe> <tokenAddress> <amount>`](#cardpay-merchant-claim-revenue-gas-estimate-merchantsafe-tokenaddress-amount)
 - [`cardpay merchant register <fundingCard> <infoDID>`](#cardpay-merchant-register-fundingcard-infodid)
 - [`cardpay merchant revenue-balances <merchantSafe>`](#cardpay-merchant-revenue-balances-merchantsafe)
 - [`cardpay prepaid-card create <safeAddress> <tokenAddress> <customizationDID> <faceValues..>`](#cardpay-prepaid-card-create-safeaddress-tokenaddress-customizationdid-facevalues..)
 - [`cardpay prepaid-card creation-gas-fee <tokenAddress>`](#cardpay-prepaid-card-creation-gas-fee-tokenaddress)
 - [`cardpay prepaid-card pay-merchant <merchantSafe> <prepaidCard> <spendAmount>`](#cardpay-prepaid-card-pay-merchant-merchantsafe-prepaidcard-spendamount)
 - [`cardpay prepaid-card payment-limits`](#cardpay-prepaid-card-payment-limits)
 - [`cardpay prepaid-card price-for-face-value <tokenAddress> <spendFaceValue>`](#cardpay-prepaid-card-price-for-face-value-tokenaddress-spendfacevalue)
 - [`cardpay prepaid-card split <prepaidCard> <customizationDID> <faceValues..>`](#cardpay-prepaid-card-split-prepaidcard-customizationdid-facevalues..)
 - [`cardpay prepaid-card split-equally <prepaidCard> <faceValue> <quantity>`](#cardpay-prepaid-card-split-equally-prepaidcard-facevalue-quantity)
 - [`cardpay prepaid-card transfer <prepaidCard> <newOwner>`](#cardpay-prepaid-card-transfer-prepaidcard-newowner)
 - [`cardpay prepaid-card-market add <fundingCard> <prepaidCard>`](#cardpay-prepaid-card-market-add-fundingcard-prepaidcard)
 - [`cardpay prepaid-card-market inventory <sku>`](#cardpay-prepaid-card-market-inventory-sku)
 - [`cardpay prepaid-card-market inventories <environment>`](#cardpay-prepaid-card-market-inventories-environment)
 - [`cardpay prepaid-card-market provision <sku> <recipient> <environment> <secret>`](#cardpay-prepaid-card-market-provision-sku-recipient-environment-secret)
 - [`cardpay prepaid-card-market remove <fundingCard> <prepaidCards..>`](#cardpay-prepaid-card-market-remove-fundingcard-prepaidcards..)
 - [`cardpay prepaid-card-market set-ask <fundingCard> <sku> <askPrice>`](#cardpay-prepaid-card-market-set-ask-fundingcard-sku-askprice)
 - [`cardpay prepaid-card-market sku-info <sku>`](#cardpay-prepaid-card-market-sku-info-sku)
 - [`cardpay price eth <token> [amount]`](#cardpay-price-eth-token-amount)
 - [`cardpay price updated-at <token>`](#cardpay-price-updated-at-token)
 - [`cardpay price usd <token> [amount]`](#cardpay-price-usd-token-amount)
 - [`cardpay rewards admin add-tokens <safeAddress> <rewardProgramId> <tokenAddress> <amount>`](#cardpay-rewards-admin-add-tokens-safeaddress-rewardprogramid-tokenaddress-amount)
 - [`cardpay rewards admin add-rule <fundingCard> <rewardProgramId> <blob>`](#cardpay-rewards-admin-add-rule-fundingcard-rewardprogramid-blob)
 - [`cardpay rewards admin create-program <prepaidCard> <admin>`](#cardpay-rewards-admin-create-program-prepaidcard-admin)
 - [`cardpay rewards admin lock <fundingCard> <rewardProgramId>`](#cardpay-rewards-admin-lock-fundingcard-rewardprogramid)
 - [`cardpay rewards admin recover-reward-tokens <safeAddress> <rewardProgramId> <tokenAddress> [amount]`](#cardpay-rewards-admin-recover-reward-tokens-safeaddress-rewardprogramid-tokenaddress-amount)
 - [`cardpay rewards admin set-admin <fundingCard> <rewardProgramId> <newAdmin>`](#cardpay-rewards-admin-set-admin-fundingcard-rewardprogramid-newadmin)
 - [`cardpay rewards claim <rewardSafe> <leaf> <proof> [acceptPartialClaim]`](#cardpay-rewards-claim-rewardsafe-leaf-proof-acceptpartialclaim)
 - [`cardpay rewards claimable-proofs <address>`](#cardpay-rewards-claimable-proofs-address)
 - [`cardpay rewards list`](#cardpay-rewards-list)
 - [`cardpay rewards pool-balances <rewardProgramId>`](#cardpay-rewards-pool-balances-rewardprogramid)
 - [`cardpay rewards register <prepaidCard> <rewardProgramId>`](#cardpay-rewards-register-prepaidcard-rewardprogramid)
 - [`cardpay rewards reward-balances <address>`](#cardpay-rewards-reward-balances-address)
 - [`cardpay rewards transfer-safe <rewardSafe> <newOwner>`](#cardpay-rewards-transfer-safe-rewardsafe-newowner)
 - [`cardpay rewards withdraw-from-safe <rewardSafe> <recipient> <tokenAddress> <amount>`](#cardpay-rewards-withdraw-from-safe-rewardsafe-recipient-tokenaddress-amount)
 - [`cardpay rewards view <rewardProgramId>`](#cardpay-rewards-view-rewardprogramid)
 - [`cardpay rewards register-rewardee-gas-estimate <prepaidCard> <rewardProgramId>`](#cardpay-rewards-register-rewardee-gas-estimate-prepaidcard-rewardprogramid)
 - [`cardpay rewards claim-reward-gas-estimate <rewardSafe> <leaf> <proof> [acceptPartialClaim]`](#cardpay-rewards-claim-reward-gas-estimate-rewardsafe-leaf-proof-acceptpartialclaim)
 - [`cardpay rewards withdraw-gas-estimate <rewardSafe> <recipient> <tokenAddress> <amount>`](#cardpay-rewards-withdraw-gas-estimate-rewardsafe-recipient-tokenaddress-amount)
 - [`cardpay safe list [address] [safeType]`](#cardpay-safe-list-address-safetype)
 - [`cardpay safe transfer-tokens [safeAddress] [token] [recipient] [amount]`](#cardpay-safe-transfer-tokens-safeaddress-token-recipient-amount)
 - [`cardpay safe transfer-tokens-gas-estimate [safeAddress] [token] [recipient] [amount]`](#cardpay-safe-transfer-tokens-gas-estimate-safeaddress-token-recipient-amount)
 - [`cardpay safe view [safeAddress]`](#cardpay-safe-view-safeaddress)
 - [`cardpay safe debug-sign-typed-data [data] [address]`](#cardpay-safe-debug-sign-typed-data-data-address)


## `cardpay assets token-balance [tokenAddress]`

Get the native token balance for the given wallet tokenAddress and network

```
Positionals:
  tokenAddress  The address of the token to get the balance of. Defaults to native token for network  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The network to run this script on  [string] [required] [choices: "sokol", "kovan", "xdai", "mainnet"]
```

## `cardpay bridge await-to-l1 <fromBlock> <txnHash>`

Wait for token bridging from L2 to L1 to complete validation

```
Positionals:
  fromBlock  Layer 2 block height before bridging was initiated  [string] [required]
  txnHash    Layer 2 transaction hash of the bridging transaction  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay bridge await-to-l2 <fromBlock> [recipient]`

Wait for token bridging from L1 to L2 to complete

```
Positionals:
  fromBlock  Layer 2 block height before bridging was initiated  [string] [required]
  recipient  Layer 2 address that is the owner of the bridged tokens, defaults to wallet address  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay bridge claim-on-l1 <messageId> <encodedData> <signatures..>`

Claim tokens that have been bridged from L2 to L1

```
Positionals:
  messageId    The message id for the bridging (obtained from `cardpay bridge await-to-l1`)  [string] [required]
  encodedData  The encoded data for the bridging (obtained from `cardpay bridge await-to-l1`)  [string] [required]
  signatures   The bridge validator signatures received from bridging (obtained from `cardpay bridge await-to-l1`)  [array] [required] [default: []]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 1 network to run this script on  [string] [required] [choices: "kovan", "mainnet"]
```

## `cardpay bridge to-l1 <safeAddress> <amount> <tokenAddress> <receiver>`

Bridge tokens to the layer 1 network

```
Positionals:
  safeAddress   The layer 2 safe to bridge the tokens from  [string] [required]
  amount        Amount of tokens you would like bridged (*not* in units of wei, but in eth)  [string] [required]
  tokenAddress  The layer 2 token address  [string] [required]
  receiver      Layer 1 address to receive the bridged tokens  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay bridge to-l2 <amount> <tokenAddress> [receiver]`

Bridge tokens to the layer 2 network

```
Positionals:
  amount        Amount of tokens you would like bridged (*not* in units of wei, but in eth)  [string] [required]
  tokenAddress  The layer 1 token address  [string] [required]
  receiver      Layer 2 address to be the owner of L2 safe, defaults to same as L1 address  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 1 network to run this script on  [string] [required] [choices: "kovan", "mainnet"]
```

## `cardpay bridge withdrawal-limits <token>`

Get the withdrawal limits for bridging a token to layer 1

```
Positionals:
  token  The layer 2 CPXD token address of the token being withdrawn  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay did resolve <did>`

Decode the DID to a JSON DIDResult

```
Positionals:
  did  The DID to decode  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
      --network  [required]
```

## `cardpay did resolve-aka <did>`

Decode the DID to a JSON DIDResult and output the contents of the alsoKnownAs URL

```
Positionals:
  did  The DID to decode  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
      --network  [required]
```

## `cardpay hub auth <hubRootUrl>`

Get an authentication token that can be used to make API requests to a Cardstack Hub server

```
Positionals:
  hubRootUrl  The URL of the hub server to authenticate with  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay merchant claim-revenue <merchantSafe> <tokenAddress> <amount>`

Claim merchant revenue earned from prepaid card payments

```
Positionals:
  merchantSafe  The address of the merchant's safe whose revenue balance is being claimed  [string] [required]
  tokenAddress  The address of the tokens that are being claimed as revenue  [string] [required]
  amount        The amount of tokens that are being claimed as revenue (*not* in units of wei, but in eth)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay merchant claim-revenue-gas-estimate <merchantSafe> <tokenAddress> <amount>`

Claim merchant revenue earned from prepaid card payments

```
Positionals:
  merchantSafe  The address of the merchant's safe whose revenue balance is being claimed  [string] [required]
  tokenAddress  The address of the tokens that are being claimed as revenue  [string] [required]
  amount        The amount of tokens that are being claimed as revenue (*not* in units of wei, but in eth)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay merchant register <fundingCard> <infoDID>`

Register as a new merchant by paying a merchant registration fee

```
Positionals:
  fundingCard  The address of the prepaid card that is being used to pay the merchant registration fee  [string] [required]
  infoDID      The DID string that can be resolved to a DID document representing the merchant's information  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay merchant revenue-balances <merchantSafe>`

View token balances of unclaimed revenue in the revenue pool for a merchant

```
Positionals:
  merchantSafe  The address of the merchant's safe whose balances are to be viewed  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card create <safeAddress> <tokenAddress> <customizationDID> <faceValues..>`

Create prepaid cards using the specified token from the specified safe with the amounts provided

```
Positionals:
  safeAddress       The address of the safe whose funds to use to create the prepaid cards  [string] [required]
  tokenAddress      The token address (defaults to Kovan DAI)  [string] [required]
  customizationDID  The DID string that represents the prepaid card customization  [string] [required]
  faceValues        A list of face values (separated by spaces) in units of ยง SPEND to create  [number] [required] [default: []]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
      --force          Force the prepaid card to be created even when the DAI rate is not snapped to USD  [boolean] [default: false]
      --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card creation-gas-fee <tokenAddress>`

Get the gas fee in the units of the specified token for creating a new prepaid card

```
Positionals:
  tokenAddress  The token address of the token that will be used to pay for the prepaid card  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card pay-merchant <merchantSafe> <prepaidCard> <spendAmount>`

Pay a merchant from a prepaid card

```
Positionals:
  merchantSafe  The address of the merchant's safe who will receive the payment  [string] [required]
  prepaidCard   The address of the prepaid card that is being used to pay the merchant  [string] [required]
  spendAmount   The amount to send to the merchant in units of SPEND  [number] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
      --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card payment-limits`

Get the minimum and maximum prepaid card payment limits in SPEND

```
Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card price-for-face-value <tokenAddress> <spendFaceValue>`

Get the price in the units of the specified token to achieve a prepaid card with the specified face value in SPEND

```
Positionals:
  tokenAddress    The token address of the token that will be used to pay for the prepaid card  [string] [required]
  spendFaceValue  The desired face value in SPEND for the prepaid card  [number] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card split <prepaidCard> <customizationDID> <faceValues..>`

Split a prepaid card into more prepaid cards (max 10) and place in the default market

```
Positionals:
  prepaidCard       The address of the prepaid card to split  [string] [required]
  customizationDID  The DID string that represents the prepaid card customization  [string] [required]
  faceValues        A list of face values (separated by spaces) in units of ยง SPEND to create  [number] [required] [default: []]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -f, --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card split-equally <prepaidCard> <faceValue> <quantity>`

Split a prepaid card into more prepaid cards with identical face values inheriting the funding card's customization and place in the default market

```
Positionals:
  prepaidCard  The address of the prepaid card to split  [string] [required]
  faceValue    The face value for the new prepaid cards  [number] [required]
  quantity     The amount of prepaid cards to create  [number] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -f, --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card transfer <prepaidCard> <newOwner>`

Transfer a prepaid card to a new owner

```
Positionals:
  prepaidCard  The address of the prepaid card to transfer  [string] [required]
  newOwner     The address of the new owner  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -f, --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market add <fundingCard> <prepaidCard>`

Adds a prepaid card to the inventory

```
Positionals:
  fundingCard  The prepaid card used to pay for gas for the txn  [string] [required]
  prepaidCard  The prepaid card to add to the inventory  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market inventory <sku>`

Get the inventory for a specific SKU from the market contract

```
Positionals:
  sku  The SKU to obtain inventory for  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market inventories <environment>`

Get all the inventories available in the market contract

```
Positionals:
  environment  The environment to query  [string] [required] [choices: "staging", "production"]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market provision <sku> <recipient> <environment> <secret>`

Provision a prepaid card to an EOA

```
Positionals:
  sku          The sku of the prepaid card to provision  [string] [required]
  recipient    The address of the recipient of the prepaid card  [string] [required]
  environment  The environment in which to provision the prepaid card (staging or production)  [string] [required]
  secret       The "provisioner secret" phrase to enable provisioning  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market remove <fundingCard> <prepaidCards..>`

Removes the specified prepaid cards from the inventory and returns them back to the issuer

```
Positionals:
  fundingCard   The prepaid card used to pay for gas for the txn  [string] [required]
  prepaidCards  A list of prepaid cards (separated by spaces) to remove from inventory  [array] [required] [default: []]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market set-ask <fundingCard> <sku> <askPrice>`

Set the asking price for prepaid cards associated to a SKU. The ask price is in units of eth in the issuing token for prepaid cards within the SKU

```
Positionals:
  fundingCard  The prepaid card used to pay for gas for the txn  [string] [required]
  sku          The SKU whose ask price is being set  [string] [required]
  askPrice     The ask price for the prepaid cards in the SKU in units of eth in the issuing token for the prepaid cards within the SKU  [number] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay prepaid-card-market sku-info <sku>`

Get the details for the prepaid cards available in the market contract for the specified SKU

```
Positionals:
  sku  The SKU to obtain details for  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay price eth <token> [amount]`

Get the ETH value for the specified token in the specified amount

```
Positionals:
  token   The token symbol (without the .CPXD suffix)  [string] [required]
  amount  The amount of the specified token (*not* in units of wei, but in eth)  [string] [default: "1"]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay price updated-at <token>`

Get the date that the oracle was last updated for the specified token

```
Positionals:
  token  The token symbol (without the .CPXD suffix)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The network to run this script on  [string] [required] [choices: "sokol", "kovan", "xdai", "mainnet"]
```

## `cardpay price usd <token> [amount]`

Get the USD value for the specified token in the specified amount

```
Positionals:
  token   The token symbol (without the .CPXD suffix)  [string] [required]
  amount  The amount of the specified token (*not* in units of wei, but in eth)  [string] [default: "1"]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The network to run this script on  [string] [required] [choices: "sokol", "kovan", "xdai", "mainnet"]
```

## `cardpay rewards admin add-tokens <safeAddress> <rewardProgramId> <tokenAddress> <amount>`

Add Reward Tokens

```
Positionals:
  safeAddress      The address of the safe whose funds to use to fill reward pool  [string] [required]
  rewardProgramId  Reward program id  [string] [required]
  tokenAddress     The address of the tokens that are being claimed as rewards  [string] [required]
  amount           The amount of tokens that are being claimed as rewards (*not* in units of wei, but in eth)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards admin add-rule <fundingCard> <rewardProgramId> <blob>`

Add a rule to a reward program

```
Positionals:
  fundingCard      The prepaid card used to pay for gas for the txn  [string] [required]
  rewardProgramId  The reward program id.  [string] [required]
  blob             Hex encoding of rule blob  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards admin create-program <prepaidCard> <admin>`

Register reward program

```
Positionals:
  admin        The address of the new admin. This is an EOA  [string] [required]
  prepaidCard  The address of the prepaid card that is being used to pay the reward program registration fee  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards admin lock <fundingCard> <rewardProgramId>`

Lock reward program

```
Positionals:
  fundingCard      The prepaid card used to pay for gas for the transaction  [string] [required]
  rewardProgramId  The reward program id.  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards admin recover-reward-tokens <safeAddress> <rewardProgramId> <tokenAddress> [amount]`

Recover reward tokens from reward pool

```
Positionals:
  rewardProgramId  The reward program id.  [string] [required]
  tokenAddress     The address of the tokens that are being recovered from reward pool  [string] [required]
  safeAddress      The address of the safe that is to receive the recovered tokens  [string] [required]
  amount           The amount of tokens to recover into safe  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards admin set-admin <fundingCard> <rewardProgramId> <newAdmin>`

Update reward program admin

```
Positionals:
  fundingCard      The prepaid card used to pay for gas for the txn  [string] [required]
  rewardProgramId  The reward program id.  [string] [required]
  newAdmin         The EOA admin of reward program  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards claim <rewardSafe> <leaf> <proof> [acceptPartialClaim]`

Claim rewards using proof

```
Positionals:
  rewardSafe  The address of the rewardSafe which will receive the rewards  [string] [required]
  leaf        The encoded the encoded bytes of merkle tree  [string] [required]
  proof       The proof used to claim reward  [string] [required]

Options:
  -w, --walletConnect       A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor              A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic            Phrase for mnemonic wallet  [string]
      --acceptPartialClaim  Boolean if user is fine to accept partial claim of reward  [boolean] [default: false]
  -n, --network             The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards claimable-proofs <address>`

View proofs that are claimable

```
Positionals:
  address  The address that tally rewarded -- The owner of prepaid card.  [string] [required]

Options:
  -w, --walletConnect    A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor           A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic         Phrase for mnemonic wallet  [string]
      --rewardProgramId  The reward program id.  [string]
      --tokenAddress     The address of the tokens that are being claimed as rewards  [string]
      --isValidOnly      Filter proofs which are valid, i.e. validFrom <= currentBlock < validTo  [boolean]
  -n, --network          The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards list`

List reward programs

```
Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards pool-balances <rewardProgramId>`

View the reward pool's token balances

```
Positionals:
  rewardProgramId  The reward program id.  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards register <prepaidCard> <rewardProgramId>`

Register rewardee

```
Positionals:
  prepaidCard      The address of the prepaid card that is being used to pay the merchant  [string] [required]
  rewardProgramId  Reward program id  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -f, --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards reward-balances <address>`

View token balances of unclaimed rewards in the reward pool

```
Positionals:
  address  The address that tally rewarded -- The owner of prepaid card.  [string] [required]

Options:
  -w, --walletConnect    A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor           A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic         Phrase for mnemonic wallet  [string]
      --rewardProgramId  The reward program id.  [string]
  -n, --network          The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards transfer-safe <rewardSafe> <newOwner>`

Withdraw from reward safe

```
Positionals:
  rewardSafe  The address of the rewardSafe that already contains rewards  [string] [required]
  newOwner    The address of the new owner  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards withdraw-from-safe <rewardSafe> <recipient> <tokenAddress> <amount>`

Withdraw from reward safe

```
Positionals:
  rewardSafe    The address of the rewardSafe that already contains rewards  [string] [required]
  recipient     The token recipient's address  [string] [required]
  tokenAddress  The address of the tokens that are being transferred from reward safe  [string] [required]
  amount        The amount of tokens to transfer (not in units of wei, but in eth)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards view <rewardProgramId>`

Get info about a reward program

```
Positionals:
  rewardProgramId  Reward program id  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards register-rewardee-gas-estimate <prepaidCard> <rewardProgramId>`

Obtain a gas estimate to register rewardee from prepaid card payments

```
Positionals:
  prepaidCard      The address of the prepaid card that is being used to pay the merchant  [string] [required]
  rewardProgramId  Reward program id  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -f, --from           The signing EOA. Defaults to the first derived EOA of the specified mnemonic  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards claim-reward-gas-estimate <rewardSafe> <leaf> <proof> [acceptPartialClaim]`

Obtain a gas estimate to claim rewards to a reward safe

```
Positionals:
  rewardSafe  The address of the rewardSafe which will receive the rewards  [string] [required]
  leaf        The encoded the encoded bytes of merkle tree  [string] [required]
  proof       The proof used to claim reward  [string] [required]

Options:
  -w, --walletConnect       A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor              A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic            Phrase for mnemonic wallet  [string]
      --acceptPartialClaim  Boolean if user is fine to accept partial claim of reward  [boolean] [default: false]
  -n, --network             The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay rewards withdraw-gas-estimate <rewardSafe> <recipient> <tokenAddress> <amount>`

Gas estimate for withdraw from reward safe

```
Positionals:
  rewardSafe    The address of the rewardSafe that already contains rewards  [string] [required]
  recipient     The token recipient's address  [string] [required]
  tokenAddress  The address of the tokens that are being transferred from reward safe  [string] [required]
  amount        The amount of tokens to transfer (not in units of wei, but in eth)  [string] [required]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay safe list [address] [safeType]`

View contents of the safes owned by the specified address (or default wallet account)

```
Positionals:
  address   The address of the safe owner. This defaults to your wallet's default account when not provided  [string]
  safeType  The type of safe to view: 'depot', 'merchant', 'prepaid-card', 'reward'  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay safe transfer-tokens [safeAddress] [token] [recipient] [amount]`

Transfer tokens from a safe to an arbitrary recipient

```
Positionals:
  safeAddress  The address of the safe that is sending the tokens  [string]
  token        The token address of the tokens to transfer from the safe  [string]
  recipient    The token recipient's address  [string]
  amount       The amount of tokens to transfer (not in units of wei, but in eth)  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay safe transfer-tokens-gas-estimate [safeAddress] [token] [recipient] [amount]`

Obtain a gas estimate to transfer tokens from a safe to an arbitrary recipient

```
Positionals:
  safeAddress  The address of the safe that is sending the tokens  [string]
  token        The token address of the tokens to transfer from the safe  [string]
  recipient    The token recipient's address  [string]
  amount       The amount of tokens to transfer (not in units of wei, but in eth)  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay safe view [safeAddress]`

View contents of the safe at the specified address

```
Positionals:
  safeAddress  The address of the safe to view  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

## `cardpay safe debug-sign-typed-data [data] [address]`

Perform a typed data signature on the provided typed data

```
Positionals:
  data     The typed data to sign (as a JSON string)  [string]
  address  (optional) The address of the signer, defaults to the first HD derived path for the seed  [string]

Options:
  -w, --walletConnect  A flag to indicate that wallet connect should be used for the wallet  [boolean]
  -t, --trezor         A flag to indicate that trezor should be used for the wallet  [boolean]
  -m, --mnemonic       Phrase for mnemonic wallet  [string]
  -n, --network        The Layer 2 network to run this script on  [string] [required] [choices: "sokol", "xdai"]
```

<!-- END CLI DOCS GENERATED BY yarn command-docs -->