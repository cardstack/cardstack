module.exports = class FakeIndexer {
  static create(params) {
    let obj = new this();
    Object.assign(obj, params);
    return obj;
  }

  async beginUpdate() {
    return new Updater(this.changedModels);
  }
};

class Updater {
  constructor(changedModels) {
    this.changedModels = changedModels;
  }
  async schema() {
    return [];
  }

  async updateContent(meta, hints, ops) {
    for (let { model, type, id } of this.changedModels) {
      if (model) {
        await ops.save(type, id, { data: model });
      } else {
        await ops.delete(type, id);
      }
    }
  }
}
